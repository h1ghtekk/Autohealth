```mermaid
flowchart TD
    subgraph Presentation["Presentation Layer"]
        UI["UI Components\n(Activities, Fragments, Composables)\n- Отображает данные пользователю\n- Обрабатывает пользовательский ввод\n- Отправляет события в ViewModel"]
        ViewModel["ViewModels\n- Управляет состоянием UI\n- Обрабатывает события от UI\n- Преобразует данные для отображения\n- Вызывает Use Cases"]
    end

    subgraph Domain["Domain Layer"]
        UseCases["Use Cases\n- Содержит бизнес-логику\n- Координирует работу с данными\n- Выполняет валидацию\n- Обрабатывает ошибки"]
        DomainModels["Domain Models\n- Бизнес-сущности\n- Правила валидации\n- Бизнес-правила"]
        Repositories["Repository Interfaces\n- Определяет контракты для работы с данными\n- Абстрагирует источники данных"]
    end

    subgraph Data["Data Layer"]
        DataSources["Data Sources\n- Управляет источниками данных\n- Кэширование\n- Синхронизация"]
        RepositoryImpl["Repository Implementations\n- Реализует работу с данными\n- Преобразует данные между слоями"]
        Network["Network\n- API запросы\n- Обработка ответов\n- Обработка ошибок сети"]
        LocalDB["Local Database\n- Локальное хранение\n- Кэширование данных\n- Офлайн-режим"]
    end

    UI -->|"1. Пользовательские действия\n2. Запросы данных\n3. Обновление UI"| ViewModel
    ViewModel -->|"1. Запросы данных\n2. Обновление состояния\n3. Обработка ошибок"| UseCases
    UseCases -->|"1. Запросы данных\n2. Бизнес-логика\n3. Валидация"| Repositories
    RepositoryImpl -->|"1. Запросы данных\n2. Кэширование\n3. Синхронизация"| DataSources
    DataSources -->|"1. API запросы\n2. Получение данных\n3. Обработка ответов"| Network
    DataSources -->|"1. Сохранение данных\n2. Чтение данных\n3. Кэширование"| LocalDB
    Repositories -->|"1. Реализация контрактов\n2. Преобразование данных"| RepositoryImpl

    classDef presentation fill:#f9f,stroke:#333,stroke-width:2px
    classDef domain fill:#bfb,stroke:#333,stroke-width:2px
    classDef data fill:#fbb,stroke:#333,stroke-width:2px

    class UI,ViewModel presentation
    class UseCases,DomainModels,Repositories domain
    class DataSources,RepositoryImpl,Network,LocalDB data
```

# Архитектура приложения Autohealth

## Описание слоев и взаимодействий

### Presentation Layer (Слой представления)

#### UI Components
- **Входные данные**: 
  - События пользовательского ввода
  - Состояние UI от ViewModel
- **Выходные данные**:
  - Пользовательские действия
  - Запросы на обновление данных
- **Функциональность**:
  - Отображение данных пользователю
  - Обработка пользовательского ввода
  - Навигация между экранами
  - Обработка жизненного цикла компонентов

#### ViewModels
- **Входные данные**:
  - События от UI
  - Данные от Use Cases
  - Состояние приложения
- **Выходные данные**:
  - Состояние UI
  - События для Use Cases
- **Функциональность**:
  - Управление состоянием UI
  - Преобразование данных для отображения
  - Обработка ошибок
  - Кэширование UI-состояния

### Domain Layer (Доменный слой)

#### Use Cases
- **Входные данные**:
  - Запросы от ViewModel
  - Данные от репозиториев
- **Выходные данные**:
  - Результаты бизнес-операций
  - Ошибки валидации
- **Функциональность**:
  - Выполнение бизнес-логики
  - Валидация данных
  - Координация работы с данными
  - Обработка бизнес-ошибок

#### Domain Models
- **Входные данные**:
  - Сырые данные из репозиториев
- **Выходные данные**:
  - Валидированные бизнес-сущности
- **Функциональность**:
  - Определение структуры данных
  - Валидация бизнес-правил
  - Преобразование данных

#### Repository Interfaces
- **Входные данные**:
  - Запросы от Use Cases
- **Выходные данные**:
  - Абстрактные операции с данными
- **Функциональность**:
  - Определение контрактов для работы с данными
  - Абстракция источников данных

### Data Layer (Слой данных)

#### Data Sources
- **Входные данные**:
  - Запросы от репозиториев
  - Данные из сети
  - Данные из локальной БД
- **Выходные данные**:
  - Объединенные данные
  - Кэшированные данные
- **Функциональность**:
  - Управление источниками данных
  - Кэширование
  - Синхронизация данных

#### Repository Implementations
- **Входные данные**:
  - Запросы от Use Cases
  - Данные из Data Sources
- **Выходные данные**:
  - Преобразованные данные
  - Результаты операций
- **Функциональность**:
  - Реализация работы с данными
  - Преобразование данных между слоями
  - Обработка ошибок данных

#### Network
- **Входные данные**:
  - API запросы
  - Параметры запросов
- **Выходные данные**:
  - Ответы API
  - Ошибки сети
- **Функциональность**:
  - Выполнение сетевых запросов
  - Обработка ответов
  - Управление сессиями
  - Обработка ошибок сети

#### Local Database
- **Входные данные**:
  - Данные для сохранения
  - Запросы на чтение
- **Выходные данные**:
  - Сохраненные данные
  - Результаты запросов
- **Функциональность**:
  - Локальное хранение данных
  - Кэширование
  - Поддержка офлайн-режима

## Принципы архитектуры
1. Чистая архитектура с разделением на слои
2. Dependency Injection для управления зависимостями
3. Single Responsibility Principle
4. Repository Pattern для абстракции источников данных
5. MVVM паттерн в Presentation Layer 